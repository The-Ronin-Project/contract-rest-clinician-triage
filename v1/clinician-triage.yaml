openapi: 3.0.0
info:
  title: Clinician Triage Service Contract
  description: API contract for the Clinician Triage Service
  version: 1.6.1
  contact:
    name: David Dionise
    email: ddionise@projectronin.com
servers:
  - url: /api/v1
tags:
  - name: Care Team Response
    description: Endpoints for creating and updating clinician communication
  - name: Patient Reported Symptoms
    description: Endpoints for fetching questionnaires that have been completed by a patient
  - name: Patient Questionnaire Response Event
    description: Endpoints for producing an event for patient questionnaire response

paths:
  /tenants/{tenant_id}/patients/{patient_id}/care_team_responses/draft:
    put:
      tags:
        - Care Team Response
      description: Create or update a care team response draft
      summary: Create/Update Care Team Response Draft
      operationId: upsertCareTeamResponse
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: 9d63650e-c289-11ed-afa1-0242ac120002
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CareTeamResponseRequestBody"
            example:
              questionnaire_response_id: fa3b78ce-c27b-11ed-afa1-0242ac120002
              patient_id: 89a7a2d9-d382-484a-8b1b-cf64bb1efb58
              option: schedule_visit
              display: Schedule a Visit
              comment: You should get in to see the doctor this week
        required: true
      responses:
        '202':
          description: Successful upsert of care team response draft
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CareTeamResponseResponse'
              examples:
                CreateCareTeamResponseExample:
                  $ref: '#/components/examples/DraftCareTeamResponseExample'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
  /tenants/{tenant_id}/patients/{patient_id}/care_team_responses:
    post:
      tags:
        - Care Team Response
      description: Create a care team response for the associated questionnaire response
      summary: Create Care Team Response
      operationId: createCareTeamResponse
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: 9d63650e-c289-11ed-afa1-0242ac120002
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CareTeamResponseRequestBody"
            example:
              questionnaire_response_id: fa3b78ce-c27b-11ed-afa1-0242ac120002
              option: schedule_visit
              display: Schedule Visit
              comment: You should get in to see the doctor this week
        required: true
      responses:
        '201':
          description: Successful creation of care team response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CareTeamResponseResponse'
              examples:
                CreateCareTeamResponseExample:
                  $ref: '#/components/examples/CreateCareTeamResponseExample'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/BadRequestError"
                DuplicateResource:
                  $ref: "#/components/examples/DuplicateResource"
        '404':
          description: Resource Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/NotFoundError"
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
    get:
      tags:
        - Care Team Response
      summary: Fetch Care Team Response
      description: Fetch care team response for the patient app
      operationId: fetchCareTeamResponse
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: 9d63650e-c289-11ed-afa1-0242ac120002
        - name: limit
          in: query
          description: Max number of care team response objects to be returned
          schema:
            type: integer
          required: true
          example: 20
        - name: page
          in: query
          description: Page number requested, starting at 0 as the first page
          schema:
            type: integer
          example: 2
          required: false
        - name: include_read
          in: query
          description: To include or filter out read care team responses
          schema:
            type: boolean
          required: false
          example: true
      responses:
        '200':
          description: Successfully fetch care team response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CareTeamResponses'
              examples:
                GetCareTeamResponseExample:
                  $ref: '#/components/examples/CareTeamResponsesExample'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/BadRequestError"
                DuplicateResource:
                  $ref: "#/components/examples/DuplicateResource"
        '404':
          description: Resource Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/NotFoundError"
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
  /tenants/{tenant_id}/patients/{patient_id}/care_team_responses/{care_team_response_id}/sign:
    patch:
      tags:
        - Care Team Response
      summary: Sign Care Team Response
      description: >-
        Sign a care team response. May include an internal note
      operationId: signCareTeamResponse
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: 9d63650e-c289-11ed-afa1-0242ac120002
        - name: care_team_response_id
          in: path
          required: true
          example: a608bf12-8fa2-404c-ad99-163a487ffbb0
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SignCareTeamResponseRequestBody"
            examples:
              SignCareTeamResponseRequestBodyExample:
                $ref: "#/components/examples/SignCareTeamResponseRequestBodyExample"
        required: true
      responses:
        '200':
          description: Successful signing of care team response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CareTeamResponseResponse'
              examples:
                CareTeamResponseExample:
                  $ref: '#/components/examples/SignCareTeamResponseExample'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AbstractResponse"
                  - type: object
                    properties:
                      errors:
                        type: array
                        items:
                          $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/BadRequestError"
        '404':
          description: Resource Not Found
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AbstractResponse"
                  - type: object
                    properties:
                      errors:
                        type: array
                        items:
                          $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/NotFoundError"
        '409':
          description: Duplicate Signature
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AbstractResponse"
                  - type: object
                    properties:
                      errors:
                        type: array
                        items:
                          $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/DuplicateSignature"
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AbstractResponse"
                  - type: object
                    properties:
                      errors:
                        type: array
                        items:
                          $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
  /tenants/{tenant_id}/patients/{patient_id}/care_team_responses/{care_team_response_id}/read:
    patch:
      tags:
        - Care Team Response
      summary: Mark Care Team Response as Read
      description: >-
        Mark the Care Team Response as having been read by the patient
      operationId: markCareTeamResponseAsRead
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: 9d63650e-c289-11ed-afa1-0242ac120002
        - name: care_team_response_id
          in: path
          required: true
          example: 25e4822e-c289-11ed-afa1-0242ac120002
          schema:
            type: string
      responses:
        '200':
          description: Successfully updated the care team response as "read"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CareTeamResponseResponse'
              examples:
                CareTeamResponseExample:
                  $ref: '#/components/examples/MarkCareTeamResponseAsReadExample'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/BadRequestError"
        '404':
          description: Resource Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/NotFoundError"
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
  /tenants/{tenant_id}/patients/{patient_id}/questionnaire_responses:
    get:
      tags:
        - Patient Reported Symptoms
      description: Fetch questionnaires that have been completed by a patient
      summary: Fetch Patient Reported Symptoms
      operationId: fetchPatientReportedSymptoms
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: 9d63650e-c289-11ed-afa1-0242ac120002
        - in: query
          name: symptoms
          description: "Comma delimited list of symptoms"
          schema:
            type: string
          required: false
          example: diarrhea,nausea
        - in: query
          name: alert_types
          description: "Comma delimited list of alert types: Available options: `non_alert, alert, high_alert`"
          schema:
            type: string
          required: false
          example: non_alert
        - in: query
          name: date_from
          description: Required if `date_to` is present
          schema:
            type: string
            format: date
          required: false
          example: 2023-03-01
        - in: query
          name: date_to
          description: Required if `date_from` is present
          schema:
            type: string
            format: date
          required: false
          example: 2023-03-05
      responses:
        '200':
          description: Successful fetch of patient reported symptoms
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PatientReportedSymptomsResponse'
              examples:
                PatientReportedSymptomsResponseExample:
                  $ref: '#/components/examples/PatientReportedSymptomsResponseExample'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/BadRequestError"
        '404':
          description: Resource Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/NotFoundError"
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
  /tenants/{tenant_id}/patients/{patient_id}/questionnaire_responses/event:
    post:
      tags:
        - Patient Questionnaire Response Event
      description: Creates a patient questionnaire response (symptoms) event
      summary: Create Patient Questionnaire Response Event
      operationId: createPatientQuestionnaireResponseEvent
      security:
        - bearerAuth: [ ]
      parameters:
        - in: path
          name: tenant_id
          required: true
          schema:
            type: string
          example: apposnd
        - in: path
          name: patient_id
          required: true
          schema:
            type: string
          example: b02cadd0-c27f-11ed-afa1-0242ac120002
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/QuestionnaireResponseEventRequestBody"
            example:
              survey_response_id: 19486
              symptoms: [fatigue, nausea]
              write_in: blurry vision, sore throat
              alert_state: HIGH_ALERT
              qol: 50
              completed_on: 2022-09-13T12:14:15
        required: true
      responses:
        '200':
          description: Successful creation of questionnaire response event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuestionnaireResponseEventResponse'
              examples:
                QuestionnaireResponseEventResponseExample:
                  $ref: '#/components/examples/QuestionnaireResponseEventResponseExample'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/BadRequestError"
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                BadRequestError:
                  $ref: "#/components/examples/InternalServerError"
components:
  schemas:
    AbstractResponse:
      type: object
      properties:
        meta:
          $ref: "#/components/schemas/Metadata"
    Metadata:
      type: object
      properties:
        links:
          type: object
          properties:
            self:
              type: string
              description: Path of the API request
          additionalProperties: true
          required:
            - self
        version:
          type: string
          description: SemVer version of the API
      required:
        - links
        - version
    CareTeamResponseRequestBody:
      type: object
      properties:
        questionnaire_response_id:
          type: string
        option:
          type: string
        display:
          type: string
        comment:
          type: string
          nullable: true
      required:
        - questionnaire_response_id
        - option
        - display
    SignCareTeamResponseRequestBody:
      type: object
      properties:
        internal_note:
          type: string
        ehr_write_back_message:
          type: string
          description: Message sent to the EHR. Free text with formatted details of the care team response and associated questionnaire response
      required:
        - ehr_write_back_message
    CareTeamResponses:
      description: >-
        Fetch data pertaining to the messages that clinicians send to the patients,
        and notes that are stored for internal use
      allOf:
        - $ref: "#/components/schemas/AbstractResponse"
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CareTeamResponse'
          required:
            - data
    CareTeamResponseResponse:
      description: >-
        Data pertaining to the messages that clinicians send to the patients,
        and notes that are stored for internal use
      allOf:
        - $ref: "#/components/schemas/AbstractResponse"
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/CareTeamResponse'
          required:
            - data
    CareTeamResponse:
      type: object
      nullable: true
      properties:
        id:
          type: string
        questionnaire_response_id:
          type: string
        is_draft:
          type: boolean
        responder:
          $ref: "#/components/schemas/Responder"
        patient_message:
          $ref: "#/components/schemas/PatientMessage"
        internal_note:
          type: string
          description: Optional note that the clinician can store for internal use
          nullable: true
        signed_at:
          type: string
          format: date-time
          description: >-
            The date/time that the clinician signed the communication with the
            customer (if it was signed)
          nullable: true
        read_at:
          type: string
          format: date-time
          description: The date/time that the patient read the response
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - questionnaire_response_id
        - is_draft
        - responder
        - patient_message
        - created_at
        - updated_at
    Responder:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
      required:
        - id
        - name
    PatientMessage:
      type: object
      properties:
        option:
          type: string
        display:
          type: string
        comment:
          type: string
      required:
        - option
    SymptomCategory:
      type: object
      properties:
        display_name:
          type: string
        alert:
          $ref: "#/components/schemas/Alert"
        responses:
          type: array
          items:
            $ref: "#/components/schemas/SymptomResponse"
      required:
        - display_name
        - alert
        - responses
    SymptomResponse:
      type: object
      properties:
        id:
          type: string
        question:
          type: string
        answer:
          type: string
        alert:
          $ref: "#/components/schemas/Alert"
        recorded_on:
          type: string
          format: date-time
      required:
        - id
        - question
        - answer
        - alert
        - recorded_on
    Alert:
      type: object
      properties:
        tier:
          type: integer
          description: Value representing the severity of an alert. Configurable per tenant. Should be the max of all `alert_tier` values in the associated `SymptomResponse` object
        level:
          type: string
          enum:
            - NON_ALERT
            - ALERT
            - HIGH_ALERT
          description: Severity level of alert - less granular than `tier`
      required:
        - tier
        - level
    SymptomEducation:
      type: object
      properties:
        category:
          type: object
          properties:
            name:
              type: string
        body:
          type: string
          description: String containing the symptom education
        external_links:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
              url:
                type: string
    QuestionnaireResponse:
      type: object
      properties:
        id:
          type: string
        alert:
          $ref: '#/components/schemas/Alert'
        care_team_response:
          $ref: '#/components/schemas/CareTeamResponse'
        symptoms:
          type: object
          nullable: true
          description: The symptoms reported by the patient via the phone app
          properties:
            severe:
              type: object
              additionalProperties:
                $ref: '#/components/schemas/SymptomCategory'
            non_severe:
              type: object
              additionalProperties:
                $ref: '#/components/schemas/SymptomCategory'
            write_in:
              type: string
              description: >-
                Custom string entered by the patient while reporting
                symptoms
              nullable: true
        symptom_educations:
          type: array
          items:
            $ref: '#/components/schemas/SymptomEducation'
          nullable: true
        completed_on:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
      required:
        - id
        - alert
        - symptoms
        - completed_on
        - created_at
    PatientReportedSymptomsResponse:
      allOf:
        - $ref: "#/components/schemas/AbstractResponse"
        - type: object
          properties:
            data:
              type: object
              properties:
                permissions:
                  description: Per-patient permissions granted to the provider
                  type: object
                  properties:
                    write_enabled:
                      type: boolean
                      description: Whether the provider is able to send a care team response message
                    allowed_responses:
                      type: object
                      additionalProperties:
                        type: string
                      description: Key-value pairs where keys are an enum of allowed responses a provider may send to a patient, and the values are the display values of the enum
                  required:
                    - write_enabled
                    - allowed_responses
                active_responses:
                  type: array
                  items:
                    $ref: '#/components/schemas/QuestionnaireResponse'
                inactive_responses:
                  type: array
                  items:
                    $ref: '#/components/schemas/QuestionnaireResponse'
              required:
                - permissions
                - active_responses
                - inactive_responses
          required:
            - data
    QuestionnaireResponseEventResponse:
      type: object
      properties:
        patient_id:
          type: string
        tenant_id:
          type: string
        survey_response_id:
          type: integer
          format: int64
        symptoms:
          type: array
          items:
            type: string
        write_in:
          type: string
          nullable: true
        alert_state:
          enum: ["NON_ALERT", "ALERT", "HIGH_ALERT"]
        qol:
          type: integer
          minimum: 0
          maximum: 100
        completed_on:
          type: string
          format: "date-time"
      required:
        - patient_id
        - tenant_id
        - survey_response_id
        - symptoms
        - alert_state
        - qol
        - completed_on
    QuestionnaireResponseEventRequestBody:
      type: object
      properties:
        survey_response_id:
          type: integer
          format: int64
        symptoms:
          type: array
          items:
            type: "string"
        write_in:
          type: string
          nullable: true
        alert_state:
          enum: ["NON_ALERT", "ALERT", "HIGH_ALERT"]
        qol:
          type: integer
          minimum: 0
          maximum: 100
        completed_on:
          type: string
          format: "date-time"
      required:
        - survey_response_id
        - symptoms
        - alert_state
        - qol
        - completed_on
    ErrorResponse:
      allOf:
        - $ref: "#/components/schemas/AbstractResponse"
        - type: object
          properties:
            errors:
              type: array
              items:
                $ref: "#/components/schemas/Error"

    Error:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the error
        title:
          type: string
          description: Human readable message the describes the type of failure
        detail_message:
          type: string
          description: Human readable message that describes the specific failure
        detail:
          type: object
          additionalProperties: true
          description: An object that can convey structured information to the client. The schema of the object MUST be definable based on the code attribute
          nullable: true
        code:
          type: string
          description: An application specific error code string. This MAY be included if there is value providing an opaque error classification that can be used to lookup relevant documentation
          nullable: true
        status:
          type: string
          description: HTTP status of the response

  examples:
    QuestionnaireResponseEventResponseExample:
      summary: Questionnaire Response Event Response Example
      value:
        patient_id: 25e4822e-c289-11ed-afa1-0242ac120002
        tenant_id: 5jzj62vp
        survey_response_id: 19486
        symptoms: [ fatigue, nausea ]
        write_in: blurry vision, sore throat
        alert_state: HIGH_ALERT
        qol: 50
        completed_on: 2022-09-13T12:14:15
    CreateCareTeamResponseExample:
      summary: Create Care Team Response Example
      value:
        meta:
          links:
            self: /v1/care_team_responses
          version: 1.0.0
        data:
          id: 25e4822e-c289-11ed-afa1-0242ac120002
          questionnaire_response_id: 9970ca54-c289-11ed-afa1-0242ac120002
          is_draft: false
          responder:
            id: 2cc29228-c281-11ed-afa1-0242ac120002
            name: Susan Smith
          patient_id: 9d63650e-c289-11ed-afa1-0242ac120002
          patient_message:
            option: schedule_visit
            display: Schedule Visit
            comment: You should get in to see the doctor this week
          internal_note: Patient needs blood drawn
          read_at: null
          signed_at: null
          created_at: '2023-01-12T07:23:13.837Z'
          updated_at: '2023-01-12T07:23:13.837Z'
    SignCareTeamResponseRequestBodyExample:
      summary: Sign Care Team Response Request Body Example
      value:
        internal_note: Patient needs blood tests
        ehr_write_back_message:
          "Diana Salazar reported symptoms through the Ronin Patient Symptom Monitoring App on 02/12/23 at 8:55pm PST

           Symptoms:

           Diarrhea:
           - Frequency: Most of the time
           - Episodes in last 24 hours: 4-6
           - Blood in stool: No
           - Days present: 3 days
           - Taken Medication: Yes

           Nausea:
           - Frequency: Most of the time
           - Severity: Severe
           - Interference with ADLs: Somewhat
           - Eating less: Yes
           - Taken Medication: No

           Write-in:
           My diarrhea is continuing despite taking Imodium. I am not vomiting but I am so nauseated it hurts to move.

           I responded to the patient via the Ronin Symptom Monitoring App on 02/13/23 at 11:15am PST: We will call you to discuss in more detail within 24 hours. If the message was received outside of clinic hours, you may get a call the next day."
    DraftCareTeamResponseExample:
      summary: Draft Create Care Team Response Example
      value:
        meta:
          links:
            self: /v1/care_team_responses/draft
          version: 1.0.0
        data:
          id: 25e4822e-c289-11ed-afa1-0242ac120002
          questionnaire_response_id: 9970ca54-c289-11ed-afa1-0242ac120002
          is_draft: true
          responder:
            id: 2cc29228-c281-11ed-afa1-0242ac120002
            name: Susan Smith
          patient_id: 9d63650e-c289-11ed-afa1-0242ac120002
          patient_message:
            option: schedule_visit
            display: Schedule Visit
            comment: You should get in to see the doctor this week
          internal_note: This is a draft
          read_at: null
          signed_at: null
          created_at: '2023-01-12T07:23:13.837Z'
          updated_at: '2023-01-12T07:23:13.837Z'
    SignCareTeamResponseExample:
      summary: Sign Care Team Response Draft Example
      value:
        meta:
          links:
            self: /v1/care_team_responses/25e4822e-c289-11ed-afa1-0242ac120002/sign
          version: 1.0.0
        data:
          id: 25e4822e-c289-11ed-afa1-0242ac120002
          questionnaire_response_id: 9970ca54-c289-11ed-afa1-0242ac120002
          is_draft: false
          responder:
            id: 2cc29228-c281-11ed-afa1-0242ac120002
            name: Susan Smith
          patient_id: 9d63650e-c289-11ed-afa1-0242ac120002
          patient_message:
            option: schedule_visit
            display: Schedule Visit
            comment: You should get in to see the doctor this week
          internal_note: Patient needs blood drawn
          read_at: null
          signed_at: '2023-01-12T07:23:13.837Z'
          created_at: '2023-01-12T07:23:13.837Z'
          updated_at: '2023-01-12T07:23:13.837Z'
    MarkCareTeamResponseAsReadExample:
      summary: Upsert Care Team Response Draft Example
      value:
        meta:
          links:
            self: /v1/care_team_responses/25e4822e-c289-11ed-afa1-0242ac120002/read
          version: 1.0.0
        data:
          id: 25e4822e-c289-11ed-afa1-0242ac120002
          questionnaire_response_id: 9970ca54-c289-11ed-afa1-0242ac120002
          is_draft: false
          responder:
            id: 2cc29228-c281-11ed-afa1-0242ac120002
            name: Susan Smith
          patient_id: 9d63650e-c289-11ed-afa1-0242ac120002
          patient_message:
            option: schedule_visit
            display: Schedule Visit
            comment: You should get in to see the doctor this week
          internal_note: Patient needs blood drawn
          read_at: '2023-01-12T09:48:54.826Z'
          signed_at: '2023-01-12T07:23:13.837Z'
          created_at: '2023-01-12T07:23:13.837Z'
          updated_at: '2023-01-12T07:23:13.837Z'
    CareTeamResponsesExample:
      summary: An array of Care Team Responses
      value:
        meta:
          links:
            self: /v1/care_team_responses
          version: 1.0.0
        data:
          - id: 25e4822e-c289-11ed-afa1-0242ac120002
            questionnaire_response_id: 2138eef5-e29b-477c-a5b4-9a585b0a4382
            is_draft: false
            responder:
              id: 2cc29228-c281-11ed-afa1-0242ac120002
              name: Susan Smith
            patient_id: 9d63650e-c289-11ed-afa1-0242ac120002
            patient_message:
              option: schedule_visit
              display: Schedule Visit
              comment: You should get in to see the doctor this week
            internal_note: Patient needs blood drawn
            read_at: null
            signed_at: null
            created_at: '2023-01-12T07:23:13.837Z'
            updated_at: '2023-01-12T07:23:13.837Z'
          - id: d3be912a-b694-4312-8451-e21b762cbac9
            questionnaire_response_id: fad0859f-5915-4434-934b-6ed355237d12
            is_draft: true
            responder:
              id: 2cc29228-c281-11ed-afa1-0242ac120002
              name: Susan Smith
            patient_id: 9d63650e-c289-11ed-afa1-0242ac120002
            patient_message:
              option: monitor_at_home
              display: Monitor at Home
            read_at: '2023-03-10T07:23:13.837Z'
            signed_at: null
            created_at: '2023-02-15T07:23:13.837Z'
            updated_at: '2023-03-10T07:23:13.837Z'
    PatientReportedSymptomsResponseExample:
      summary: Completed Questionnaire
      value:
        meta:
          links:
            self: /v1/symptoms/27ce169e-c280-11ed-afa1-0242ac120002
          version: 1.0.0
        data:
          permissions:
            write_enabled: true
            allowed_responses:
              address_before: "Will address: Before next appt"
              address_next: "Will address: At next appt"
              address_unneeded: "No need to address: Alert not needed"
              addressed_already: "No need to address: Already discussed"
          active_responses:
            - id: eef1b220-c754-11ed-afa1-0242ac120002
              alert:
                tier: 4
                level: HIGH_ALERT
              care_team_response: null
              symptoms:
                severe:
                  nausea:
                    display_name: Nausea
                    alert:
                      tier: 4
                      level: HIGH_ALERT
                    responses:
                      - id: cc6bc003-08b8-4a85-a06c-dfd5a12eb9f7
                        question: "Severity"
                        answer: "Severe"
                        alert:
                          tier: 3
                          level: ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: f848c2fd-daa2-4e0a-92e8-9aa4ac169242
                        question: "Frequency"
                        answer: "Almost constantly"
                        alert:
                          tier: 4
                          level: HIGH_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 60db9298-1966-4562-a50c-1d4435addbde
                        question: "Diet affected"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 98d1d3ec-d132-4edb-a6bb-e659ad7ec4e3
                        question: "Weight loss"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: a3b5bc05-9f7c-4385-b7c8-17e4d6bc350d
                        question: "Weight loss > 10%"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                  diarrhea:
                    display_name: Diarrhea
                    alert:
                      tier: 2
                      level: ALERT
                    responses:
                      - id: fc1d2ebb-36c2-4cb3-8818-03ecee747b09
                        question: "Frequency"
                        answer: "Occasionally"
                        alert:
                          tier: 2
                          level: ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 08cfce77-e2a6-4538-901d-5037cb22827a
                        question: "Daily episodes at worst"
                        answer: "2-3"
                        alert:
                          tier: 2
                          level: ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 61ac3531-dde6-4139-9c32-495602ef0c27
                        question: "Blood or mucus in stool"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 3afb500a-3098-4aff-86fc-6205192f5c55
                        question: "Instrumental ADL interference"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 1295425d-3be6-48d5-a534-eefe421a657a
                        question: "Self care ADL interference"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                write_in: Nausea is preventing me from getting out of bed
              created_at: '2023-01-12T07:23:13.837Z'
              completed_on: '2023-01-12T07:45:23.534Z'
            - id: 0d2791a1-39d5-4355-bafd-cdbf0448627e
              alert:
                tier: 2
                level: ALERT
              care_team_response: null
              symptoms:
                severe:
                  nausea:
                    display_name: Nausea
                    alert:
                      tier: 4
                      level: HIGH_ALERT
                    responses:
                      - id: cc6bc003-08b8-4a85-a06c-dfd5a12eb9f7
                        question: "Severity"
                        answer: "Severe"
                        alert:
                          tier: 3
                          level: ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: f848c2fd-daa2-4e0a-92e8-9aa4ac169242
                        question: "Frequency"
                        answer: "Almost constantly"
                        alert:
                          tier: 4
                          level: HIGH_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 60db9298-1966-4562-a50c-1d4435addbde
                        question: "Diet affected"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 98d1d3ec-d132-4edb-a6bb-e659ad7ec4e3
                        question: "Weight loss"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: a3b5bc05-9f7c-4385-b7c8-17e4d6bc350d
                        question: "Weight loss >10%"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                  diarrhea:
                    display_name: Diarrhea
                    alert:
                      tier: 2
                      level: ALERT
                    responses:
                      - id: fc1d2ebb-36c2-4cb3-8818-03ecee747b09
                        question: "Frequency"
                        answer: "Occasionally"
                        alert:
                          tier: 2
                          level: ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 08cfce77-e2a6-4538-901d-5037cb22827a
                        question: "Daily episodes at worst"
                        answer: "2-3"
                        alert:
                          tier: 2
                          level: ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 61ac3531-dde6-4139-9c32-495602ef0c27
                        question: "Blood or mucus in stool"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 3afb500a-3098-4aff-86fc-6205192f5c55
                        question: "Instrumental ADL interference"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 1295425d-3be6-48d5-a534-eefe421a657a
                        question: "Self care ADL interference"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
              created_at: '2023-01-11T07:21:34.735Z'
              completed_on: '2023-01-11T07:43:52.523Z'
          inactive_responses:
            - id: 27ce169e-c280-11ed-afa1-0242ac120002
              alert:
                tier: 4
                level: HIGH_ALERT
              care_team_response:
                id: 1f82b782-c281-11ed-afa1-0242ac120002
                questionnaire_response_id: 77aa5a62-d914-4d08-aa66-da130fb29096
                is_draft: false
                responder:
                  id: 2cc29228-c281-11ed-afa1-0242ac120002
                  name: Susan Smith
                patient_message:
                  option: address_next
                  display: "Will address: At next appt"
                  comment: "You'll be able to discuss this with the doctor at your next visit"
                internal_note: "Patient would like to discuss their vomitting with the doctor"
                signed_at: "2022-02-11T02:45:03.246Z"
                read_at: "2022-02-11T03:26:16.876Z"
                created_at: "2022-02-11T02:34:56.356"
                updated_at: "2022-02-11T03:26:16.876Z"
              symptoms:
                severe:
                  nausea:
                    display_name: Nausea
                    alert:
                      tier: 4
                      level: HIGH_ALERT
                    responses:
                      - id: 6237dfdc-bf42-43e3-a126-d8d4926b452d
                        question: "Severity"
                        answer: "Severe"
                        alert:
                          tier: 3
                          level: ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 3e553eaa-c1e7-4560-b274-10392a9fb4a7
                        question: "Frequency"
                        answer: "Almost constantly"
                        alert:
                          tier: 4
                          level: HIGH_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 44a00f27-067c-4eb6-a3ec-2cabc1414348
                        question: "Diet affected"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: f4fb79ef-1be9-4749-a378-a7876f42c268
                        question: "Weight loss"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                      - id: 3158bf2c-7858-4106-b503-f7b7a54b5628
                        question: "Weight loss >10%"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:26:52.000Z"
                  diarrhea:
                    display_name: Diarrhea
                    alert:
                      tier: 2
                      level: ALERT
                    responses:
                      - id: cc542451-8f42-4376-8fc5-b61933f2c40e
                        question: "Frequency"
                        answer: "Occasionally"
                        alert:
                          tier: 2
                          level: ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: 388b8023-f1d9-499d-8816-3e7e18be5145
                        question: "Daily episodes at worst"
                        answer: "2-3"
                        alert:
                          tier: 2
                          level: ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: b700f1c1-9b50-406c-8456-a78a6e351b02
                        question: "Blood or mucus in stool"
                        answer: "No"
                        alert:
                          tier: 0
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: d9ec9f76-ef97-4dd7-8fcb-f07b9970a918
                        question: "Instrumental ADL interference"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
                      - id: fb50f8f5-d424-436b-b625-39f1a06fc55c
                        question: "Self care ADL interference"
                        answer: "Yes"
                        alert:
                          tier: 1
                          level: NON_ALERT
                        recorded_on: "2022-12-02T19:52:48.000Z"
              created_at: '2023-01-12T07:23:13.837Z'
              completed_on: '2023-01-12T07:45:23.534Z'
            - id: 36f5b5f4-c754-11ed-afa1-0242ac120002
              alert:
                tier: 0
                level: NON_ALERT
              care_team_response: null
              symptoms: null
              created_at: "2022-02-11T02:34:56.356"
              completed_on: "2022-02-11T03:26:16.876Z"
    BadRequestError:
      summary: Bad Request Error Example
      value:
        meta:
          links:
            self: /v1/care_team_responses/10256
          version: 1.0.0
        errors:
          - id: 179F5161-D264-422B-8E2E-72B721739922
            title: Invalid Attribute
            detail_message: Attribute 'count' must be a positive value.
            code: VALIDATE-25
            detail:
              field: count
              value: '-1'
              message: Must be a positive value
            status: '400'
    DuplicateResource:
      summary: Bad Request - Duplicate Resource
      value:
        meta:
          links:
            self: /v1/care_team_responses/10256
          version: 1.0.0
        errors:
          - id: 179F5161-D264-422B-8E2E-72B721739922
            title: Resource Already Exists
            detail_message: The care team response has already been stored and sent to the patient
            code: DUPLICATE
            status: '400'
    DuplicateSignature:
      summary: Duplicate Signature
      value:
        meta:
          links:
            self: /v1/care_team_responses/10256
          version: 1.0.0
        errors:
          - id: 179F5161-D264-422B-8E2E-72B721739922
            title: Response Already Signed
            detail_message: The care team response has already been signed by a provider
            code: DUP_SIGNATURE
            status: '409'
    NotFoundError:
      summary: Resource Not Found Error Example
      value:
        meta:
          links:
            self: /v1/care_team_responses/10256
          version: 1.0.0
        errors:
          - id: 179F5161-D264-422B-8E2E-72B721739922
            title: Resource Not Found
            detail_message: No questionnaire response with the ID "10256" found
            status: '404'
    InternalServerError:
      summary: Internal Server Error
      value:
        meta:
          links:
            self: /v1/care_team_responses/10256
          version: 1.0.0
        errors:
          - id: 179F5161-D264-422B-8E2E-72B721739922
            title: Internal Server Error
            detail_message: Lost connection with DB
            status: '500'
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
